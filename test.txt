// Exemplo de código para testar o parser
const MAX_TEMP -> int = 95;

let counter -> int = 0;
let message -> string = "Bem-vindo!";
let ready -> bool;

proc checkSensors() {
    if (_SENSOR.WATER_OK and _SENSOR.BEANS_OK) {
        log("Sensores OK");
        _ACT.DISPLAY = 1;
    } else {
        log("Verificar sensores");
        halt;
    }
}

proc makeCoffee() {
    let temp -> int;
    
    display("Preparando café...");
    
    _ACT.HEATER = 1;
    
    while (temp < MAX_TEMP) {
        temp = _SENSOR.TEMP;
        _MEM[0] = temp;
    }
    
    _ACT.PUMP = 1;
    _ACT.GRINDER = 1;
    
    repeat {
        counter = counter + 1;
        if (counter > 10) {
            break;
        }
    } until (_SENSOR.CUP_DETECTED);
    
    _ACT.VALVE = 1;
    
    display("Café pronto!");
}

{
    call checkSensors();
    
    if (_SENSOR.COIN) {
        call makeCoffee();
    } else {
        display("Insira moeda");
    }
    
    clear.DISPLAY;
}